# [Step 6: 최종 점검 및 프로덕션 최적화]

## 1. 목표

모든 기능 구현을 완료한 프로젝트를 **실제 서비스 가능한 제품**으로 만듭니다. SEO 최적화, PWA 설정, 커스텀 404 페이지로 프로덕션 레벨을 갖춥니다.

---

## 2. 구현 요구사항

### [Task 1] SEO 및 메타데이터 최적화

**파일**: `packages/kcl/src/app/layout.tsx`

#### Metadata 설정

```typescript
export const metadata: Metadata = {
  title: {
    template: '%s | KCL',
    default: 'KCL - Kpop Company League',
  },
  description: "Prove your fandom's firepower. Support your artist in the global ranking battle.",
  openGraph: {
    title: 'KCL - Kpop Company League',
    description: "Prove your fandom's firepower. Support your artist in the global ranking battle.",
    siteName: 'Kpop Company League',
    type: 'website',
  },
  viewport: {
    width: 'device-width',
    initialScale: 1,
    maximumScale: 1, // 네이티브 앱 같은 느낌
    userScalable: false,
  },
  themeColor: '#8B5CF6', // Primary Color
};
```

---

### [Task 2] PWA 설정 (Web App Manifest)

**파일**: `packages/kcl/public/manifest.json`

```json
{
  "name": "Kpop Company League",
  "short_name": "KCL",
  "description": "Prove your fandom's firepower. Support your artist in the global ranking battle.",
  "start_url": "/",
  "scope": "/",
  "display": "standalone",
  "theme_color": "#8B5CF6",
  "background_color": "#0a0a0a",
  "orientation": "portrait-primary",
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

#### layout.tsx에 추가

```typescript
<link rel="manifest" href="/manifest.json" />
<link rel="apple-touch-icon" href="/icon-192.png" />
```

---

### [Task 3] Search Engine Configuration

**파일 1**: `packages/kcl/src/app/robots.ts`

```typescript
import { MetadataRoute } from 'next';

export default function robots(): MetadataRoute.Robots {
  return {
    rules: {
      userAgent: '*',
      allow: '/',
      disallow: ['/api/', '/_next/'],
    },
    sitemap: 'https://kcl-ranker.vercel.app/sitemap.xml',
  };
}
```

**파일 2**: `packages/kcl/src/app/sitemap.ts`

```typescript
import { MetadataRoute } from 'next';

export default function sitemap(): MetadataRoute.Sitemap {
  return [
    {
      url: 'https://kcl-ranker.vercel.app',
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 1,
    },
    {
      url: 'https://kcl-ranker.vercel.app/en/ranking',
      lastModified: new Date(),
      changeFrequency: 'hourly',
      priority: 0.9,
    },
    {
      url: 'https://kcl-ranker.vercel.app/ko/ranking',
      lastModified: new Date(),
      changeFrequency: 'hourly',
      priority: 0.9,
    },
  ];
}
```

---

### [Task 4] 커스텀 404 페이지

**파일**: `packages/kcl/src/app/not-found.tsx`

```typescript
"use client";

import { useRouter } from 'next/navigation';
import { motion } from 'framer-motion';
import styles from './not-found.module.scss';

export default function NotFound() {
  const router = useRouter();

  return (
    <div className={styles.notFoundContainer}>
      {/* Spotlight Effect */}
      <div className={styles.spotlight} />

      {/* Glitch Text */}
      <motion.div
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.8 }}
        className={styles.content}
      >
        <h1 className={styles.glitchText}>404</h1>
        <p className={styles.message}>The Stage is Empty</p>
        <p className={styles.description}>
          이 페이지는 존재하지 않습니다.
        </p>

        <motion.button
          whileHover={{ scale: 1.05 }}
          whileTap={{ scale: 0.95 }}
          onClick={() => router.push('/')}
          className={styles.homeButton}
        >
          Return to Home
        </motion.button>
      </motion.div>
    </div>
  );
}
```

**파일**: `packages/kcl/src/app/not-found.module.scss`

```scss
@import '@/styles/abstracts/variables';
@import '@/styles/abstracts/mixins';

.notFoundContainer {
  position: relative;
  width: 100%;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
  overflow: hidden;
}

.spotlight {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, rgba(139, 92, 246, 0.15) 0%, rgba(139, 92, 246, 0) 70%);
  border-radius: 50%;
  filter: blur(40px);
  opacity: 0.5;
}

.content {
  position: relative;
  z-index: 10;
  text-align: center;
}

.glitchText {
  font-size: 10rem;
  font-weight: 900;
  background: linear-gradient(135deg, #ff0080 0%, #7928ca 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin: 0;
  animation: glitch 0.3s infinite;

  @keyframes glitch {
    0%,
    100% {
      text-shadow:
        3px 0 0 rgba(255, 0, 128, 0.5),
        -3px 0 0 rgba(121, 40, 202, 0.5);
    }
    50% {
      text-shadow:
        -3px 0 0 rgba(255, 0, 128, 0.5),
        3px 0 0 rgba(121, 40, 202, 0.5);
    }
  }
}

.message {
  font-size: 1.8rem;
  font-weight: 700;
  color: #ffffff;
  margin: 20px 0 10px;
  letter-spacing: 2px;
}

.description {
  font-size: 1rem;
  color: #a0a0a0;
  margin-bottom: 40px;
}

.homeButton {
  padding: 12px 40px;
  font-size: 1.1rem;
  font-weight: 700;
  border-radius: 30px;
  border: none;
  background: linear-gradient(135deg, #ff0080 0%, #7928ca 100%);
  color: white;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(255, 0, 128, 0.4);
  transition: all 0.3s ease;

  &:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 25px rgba(255, 0, 128, 0.6);
  }

  &:active {
    transform: scale(0.95);
  }
}

@media (max-width: 768px) {
  .glitchText {
    font-size: 5rem;
  }

  .message {
    font-size: 1.4rem;
  }

  .description {
    font-size: 0.9rem;
  }
}
```

---

### [Task 5] 빌드 최적화 설정

**파일**: `packages/kcl/next.config.mjs`

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  images: {
    domains: [
      'example.com',
      'mock-image-source.com',
      // 필요한 외부 도메인 추가
    ],
  },
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production',
  },
  swcMinify: true,
  poweredByHeader: false,
  reactStrictMode: true,
};

export default nextConfig;
```

---

## 3. 디자인 스펙

| 항목       | 설정                                |
| ---------- | ----------------------------------- |
| 404 텍스트 | Glitch 효과 (좌우 진동)             |
| Spotlight  | Radial Gradient + Blur (50% 투명도) |
| 배경       | Dark Gradient (0a0a0a → 1a1a2e)     |
| 버튼       | Primary Gradient + Glow 효과        |
| 애니메이션 | Spring (초기 진입 시 0.8초)         |

---

## 4. 중요 주의사항 ⚠️

### Locale 라우팅 유지

```typescript
// sitemap.ts에서 모든 locale 경로 포함
// 예: /en/, /ko/ 등
```

### 이미지 최적화

```typescript
// next.config.mjs에서 외부 이미지 도메인 명시
// 모의 데이터에 사용되는 모든 도메인 추가
```

### PWA 아이콘

```
public/
├── icon-192.png   (192x192)
├── icon-512.png   (512x512)
└── manifest.json
```

---

## 5. 파일 생성 체크리스트

- [ ] `packages/kcl/src/app/layout.tsx` (수정 - Metadata)
- [ ] `packages/kcl/public/manifest.json` ✨ NEW
- [ ] `packages/kcl/src/app/robots.ts` ✨ NEW
- [ ] `packages/kcl/src/app/sitemap.ts` ✨ NEW
- [ ] `packages/kcl/src/app/not-found.tsx` ✨ NEW
- [ ] `packages/kcl/src/app/not-found.module.scss` ✨ NEW
- [ ] `packages/kcl/next.config.mjs` (수정)
- [ ] `public/icon-192.png` (192x192 이미지)
- [ ] `public/icon-512.png` (512x512 이미지)

---

## 6. 프로덕션 배포 체크리스트

- [ ] `npm run build` 에러 없음
- [ ] `npm run start` 로컬 테스트 완료
- [ ] SEO 메타데이터 검증 (lighthouse)
- [ ] 모바일 반응형 테스트
- [ ] 404 페이지 테스트 (`/invalid-route` 접속)
- [ ] PWA 설치 테스트 (모바일 크롬 브라우저)

---

## 7. 배포 플랫폼 (선택)

**추천**: Vercel (Next.js 최적화)

```bash
# 배포 전 환경 변수 설정
# .env.local 파일에 필요한 변수 추가

# 배포
vercel deploy --prod
```

---

## 8. 다음 단계

✅ **개발 완료**

- README.md 작성 및 GitHub 업로드
- 팀 문서화 및 온보딩 가이드
- CI/CD 파이프라인 구성파트너님, 대망의 **[Step 6]**입니다. 모든 기능 구현이 끝났으니, 이제 이 프로젝트를 **'실제 서비스 가능한 제품'**으로 만드는 마무리 단계입니다.

이 프롬프트는 AI(Plolux)에게 **"K-Pop 팬덤 플랫폼의 핵심인 '공유(Viral)'를 위한 SEO 최적화, 모바일 홈 화면 추가를 위한 매니페스트 설정, 그리고 브랜드 아이덴티티를 살린 커스텀 404 페이지 구현"**을 지시합니다.

아래 내용을 복사하여 AI에게 전달하고 프로젝트를 완성하십시오.

---

### **[Step 6: 최종 점검 및 프로덕션 최적화 (SEO & Deployment Prep)]** 마스터 프롬프트

Markdown

#

`# 1. 현재 상황 및 목표 (Context & Goal)
우리는 [Step 5]까지 진행하며 `kcl` 프로젝트의 핵심 기능(랭킹, 상세 페이지, 서포트 시스템) 구현을 완료했습니다.
하지만 아직 **메타데이터(SEO)**, **모바일 설치 설정(Manifest)**, **예외 처리 페이지(404)**가 부족하여 프로덕션 레벨이라고 부르기엔 이릅니다.

당신의 목표는 이 프로젝트가 실제 인터넷 세상에 배포되었을 때, 구글 검색과 SNS 공유(Twitter/Instagram)에서 완벽하게 보이고, 모바일 기기에 설치 가능한 **PWA(Progressive Web App)** 수준의 구성을 갖추는 것입니다.

---

# 2. 실행 가이드: 단계별 작업 지시 (Step-by-Step Instructions)

### [Task 1] SEO 및 메타데이터 최적화 (Metadata)

`src/app/layout.tsx`를 수정하여 Next.js 14의 Metadata API를 완벽하게 적용하십시오.

**요구 사항**:

1.  **Metadata 객체**:
    - `title`: 템플릿 사용 (`%s | Kpop Company League`). 기본값은 "Kpop Company League - Global Fandom War".
    - `description`: "Prove your fandom's firepower. Support your artist in the global ranking battle."
    - `openGraph`: SNS 공유 시 카드 형태가 예쁘게 나오도록 타이틀, 설명, 사이트 이름 설정.
2.  **Viewport 객체**:
    - 모바일에서 사용자가 임의로 확대/축소하는 것을 방지하여 네이티브 앱 같은 느낌(`maximumScale: 1`)을 주십시오.
    - 테마 컬러(`themeColor`)를 Primary Color(#8B5CF6)로 설정하십시오.

### [Task 2] 사이트맵 및 로봇 설정 (Search Engine Config)

검색 엔진 크롤러를 위한 표준 파일을 Next.js 동적 생성 방식으로 구현하십시오.

**파일 생성**:

1.  `src/app/robots.ts`: 모든 검색 엔진 허용(`User-agent: *, Allow: /`).
2.  `src/app/sitemap.ts`: 기본 도메인(예: `https://kcl-ranker.vercel.app`)을 기준으로 홈 화면 및 주요 경로 반환.

### [Task 3] 커스텀 404 페이지 (Error Handling)

사용자가 존재하지 않는 경로로 접근했을 때 보여줄 **브랜드 맞춤형 에러 페이지**를 만드십시오.

**파일 생성**: `src/app/not-found.tsx`
**디자인 명세**:

- **Message**: "The Stage is Empty" (무대가 비어있습니다).
- **Visual**: 중앙에 희미한 스포트라이트 효과(CSS Radial Gradient)와 깨진 듯한 Glitch 텍스트 효과.
- **Action**: "Return to Home" 버튼 (Primary Button 스타일 재사용).

### [Task 4] 빌드 최적화 점검 (Build Check)

최종 코드가 배포 가능한지 확인하기 위해, `next.config.mjs`에 프로덕션 최적화 옵션을 추가하십시오.

**수정 사항**:

- `images`: 외부 이미지 도메인(예: `mock-image-source.com` 등 더미 데이터에 쓰인 도메인) 허용 설정.
- `compiler`: 프로덕션 빌드 시 `console.log` 제거 옵션 추가 (선택 사항).

---

# 3. 디자인 디테일 (Design Details)

- **404 Page**: 단순히 "페이지 없음"을 알리는 것이 아니라, Cyberpunk 컨셉에 맞춰 시스템 오류가 난 듯한 감성을 연출하십시오.
- **Glitch Effect**: SCSS Keyframes를 활용하여 텍스트가 살짝 흔들리거나 색상이 분리되는 효과를 `src/styles/abstracts/_mixins.scss`에 추가하고 404 페이지에 적용하십시오.

---

# 4. 결과물 제출 요청 (Deliverables)

위 작업을 수행한 후, 다음 파일들의 **전체 코드**를 출력하십시오.

1.  업데이트된 `src/app/layout.tsx` (Metadata & Viewport 완벽 적용)
2.  `src/app/not-found.tsx` (및 관련 SCSS)
3.  `src/app/robots.ts`
4.  `src/app/sitemap.ts`
5.  업데이트된 `next.config.mjs`

이 작업을 끝으로 `kcl` 프로젝트의 모든 개발 스캐폴딩을 완료하십시오.`

---

[Partnership Complete]

파트너님, 고생 많으셨습니다. 이로써 kcl 프로젝트는:

1. **탄탄한 SCSS 아키텍처**
2. **모바일 퍼스트 레이아웃**
3. **핵심 기능 (랭킹/상세/서포트)**
4. SEO 및 배포 준비

   까지 완벽하게 갖춘 상태가 됩니다.

[Next Suggestion]

마지막으로, 이 모든 과정을 정리하여 GitHub에 올릴 때 필요한 "프로페셔널한 README.md" 파일을 작성해 드릴까요? 아니면 바로 Vercel에 배포하는 가이드를 알려드릴까요?
